{% extends "users/base.html" %}
{% block stylesheets %}{% endblock %}

{% block body_block %}
<title>Assiette de Poséidon ψ Menu Form</title>
<div class="container">
    {% if registered_menuitem %}
        <h1>Menu Item has been Registered!</h1>
    {% else %}
        <h1 id="menu_header">Discover Our Menu</h1>
        <p id="menu_header_sub">Freshly hand grabbed by the chef by order.</p>
        <div class="row">
            <div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
                <form method="POST" class="menuitem-form" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{menu_form.as_p}}
                    {% if user.role == user.CHEF or user.role == user.ADMIN %}
                        <button type="submit" class="save btn btn-info">Save</button>
                        {% if edit == True %}
                            <a href="/menu/{{id}}/delete" class="save btn btn-info">Delete</a>  
                        {% endif %}
                    {% endif %}
                </form>
            </div>
            <div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
                <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold text-center">Shopping cart</div>
                {% if orderedItem == None %}
                    <input type="number" id="quantity" value="0">
                {% else %}
                    <input type="number" id="quantity" value="{{ orderedItem.itemQuantity }}">
                {% endif %}
                <button class="add-to-cart-button">Add to Cart</button>
            </div>
            <div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
                <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold text-center">Discussion board</div>
            </div>
        </div>
    {% endif %}
</div>
<script>
const BUTTON = document.querySelector(".add-to-cart-button");
const INPUT = document.querySelector("#quantity");

BUTTON.addEventListener("click", (e) => {
    e.preventDefault();
    window.location.href = `/menu/cart/add/{{id}}/${INPUT.value}`;
});
</script>

{% endblock body_block %}


{% if False %}
<!-- <title>Assiette de Poséidon ψ Menu Form</title>
<div class="container">
  <div class="jumbotron">
      {% if registered_menuitem %}
        <h1>Menu Item has been Registered!</h1>
      {% else %}
        <h1>Register Menu Item Here</h1>
        <h3>Just fill out the form.</h3>

        <form method="POST" class="menuitem-form" enctype="multipart/form-data">
        {% csrf_token %}
        {{menu_form.as_p}}
        <button type="submit" class="save btn btn-info">Save</button>
        {% if edit == True %}
            <a href="/menu/{{id}}/delete" class="save btn btn-info">Delete</a>  
        {% endif %}
        </form>

        <script>var editor = new MediumEditor('.editable');</script>
        {% endif %}
  </div>
</div> -->

{% endif %}