{% extends 'users/base.html' %}
{% load static %}
{% load bootstrap3 %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{% static 'css/users/main.css' %}">
{% endblock %}

{% block body_block %}
<title>Assiette de Poséidon ψ Menu Form</title>

<div class="container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-4 mx-auto"
    style="width: 80%; margin-left: auto; margin-right: auto;">
    <div class="card card0 border-0" style="background-color: rgba(255, 255, 255, 0.9); ">
        <div class="row d-flex">
            <div class="row" style="display: flex; ">
                <img src="{% static 'img/logo.png' %}" class="logo">
            </div>
            <div class="col-xl-9" style="padding-left: auto; padding-right: 0%; ">

                <div class="card2 card border-0 px-4 py-4">
                    {% if registered_menuitem %}
                    <h1>Menu Item has been Registered!</h1>
                    {% else %}
                    <div class="row mb-4 px-3">
                        <h2 class="mb-0 mr-4 mt-1">Register Menu Item Here</h2>
                    </div>
                    <div class="row mb-4 px-3">
                        <h4 class="mb-0 mr-4 mt-2">Just fill out the form.</h4>
                    </div>
                    <div class="row px-3 mb-4">
                        <div class="line"></div>
                        <div class="line"></div>
                    </div>
                    <form method="POST" class="menuitem-form" enctype="multipart/form-data">
                        {% csrf_token %}
                        {% bootstrap_form form %}

                        <div class="row mb-3 px-3"> <button type="submit"
                                class="btn btn-blue text-center">Register</button> </div>
                    </form>
                    {% endif %}
            </div>
        </div>
    </div>
    <div class="bg-primary py-4" style="height: 15px">
        <div class="row px-3">
            <small class="ml-4 ml-sm-5 mb-2">Copyright &copy; 2020. All rights reserved.</small>
            <div class="social-contact ml-4 ml-sm-auto">
                <span class="fa fa-facebook mr-4 text-sm"></span>
                <span class="fa fa-google-plus mr-4 text-sm"></span>
                <span class="fa fa-linkedin mr-4 text-sm"></span>
                <span class="fa fa-twitter mr-4 mr-sm-5 text-sm"></span>
            </div>
        </div>
    </div>
</div>
<br>
{% if user.role == user.CUSTOMER %}
<div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
    <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold text-center">
        Shopping cart</div>
    {% if orderedItem == None %}
    <input type="number" id="quantity" value="0">
    {% else %}
    <input type="number" id="quantity" value="{{ orderedItem.itemQuantity }}">
    {% endif %}
    <button class="add-to-cart-button">Add to Cart</button>
</div>
<div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
    <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold text-center">
        Discussion board</div>
</div>
</div>
{% endif %}
</div>

<script>
    const BUTTON = document.querySelector(".add-to-cart-button");
    const INPUT = document.querySelector("#quantity");
    
    BUTTON.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = `/menu/cart/add/{{id}}/${INPUT.value}`;
    });
</script>

{% endblock %}